"use strict";

const Drive = use("Drive");
const Helpers = use("Helpers");
const { Command } = use("@adonisjs/ace");

class ConstantInit extends Command {
  /**
   * Signature of the console command.
   *
   * @returns {String}
   */
  static get signature() {
    return "constant:init";
  }

  /**
   * Description of the console command.
   *
   * @returns {String}
   */
  static get description() {
    return "Create a migration file for constant lookup";
  }

  /**
   * Execute the console command.
   *
   * @param {Object} args
   * @param {Object} options
   * @returns {Promise}
   */
  async handle(args, options) {
    const date = new Date();
    const fileName = date.getTime() + "_constant.js";
    await Drive.copy(__dirname + "/../templates/constant.tmpl", Helpers.migrationsPath(fileName));
  }
}

module.exports = ConstantInit;
